<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>
		<%= title %>
	</title>
	<!-- stylesheet -->
	<link rel="stylesheet" href="https://unpkg.com/@material-tailwind/html@latest/styles/material-tailwind.css" />

	<!-- script -->

	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	<!-- from node_modules -->

	<!-- from cdn -->
	<script src="https://unpkg.com/@material-tailwind/html@latest/scripts/dialog.js"></script>
	<style>
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			margin: 0;
			padding: 0;
			background-color: #f7f7f7;
			color: #333;
		}

		header {
			background-color: #4caf50;
			color: #fff;
			text-align: center;
			padding: 1rem;
		}

		section {
			/* max-width: 800px; */
			margin: 2rem;
			padding: 2rem;
			border-radius: 8px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		h2 {
			color: #4caf50;
		}

		h1 {
			font-size: 2.5rem;
		}

		p {
			line-height: 1.6;
		}

		footer {
			background-color: #333;
			color: #fff;
			text-align: center;
			padding: 10px;
			position: fixed;
			bottom: 0;
			width: 100%;
		}

		.btn-orchids {
			width: 12rem;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 10px 20px;
			margin-bottom: 1rem;
			background-color: #4caf50;
			color: #fff;
			text-decoration: none;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 1.2rem;
		}

		.btn-orchids:hover {
			background-color: #45a049;
		}

		/* .btn-actions {
			
		} */

		.btn-action:hover {
			background-color: rgb(34 197 94 / 0.3);
		}

		.btn-danger:hover {
			background-color: rgba(197, 34, 34, 0.3);
			color: red
		}
	</style>
</head>

<body>
	<header>
		<h1>Orchids Flower Shop</h1>
	</header>
	<section class="bg-white">
		<div class="flex justify-start">
			<a href="/orchids" class="btn-orchids font-semibold bg-gradient-to-tr" data-ripple-light="true"
				data-dialog-target="dialog-create">
				<span class="material-symbols-outlined">
					arrow_back_ios
					</span>
				<span>Back to home</span>
			</a>
		</div>
		<table class="w-full mt-4 text-left table-auto min-w-max">
			<thead>
				<tr>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Orchid
						</p>
					</th>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Price
						</p>
					</th>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Original
						</p>
					</th>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Nature
						</p>
					</th>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Color
						</p>
					</th>
					<th class="p-4 border-y border-green-100 bg-green-50/70	text-2xl">
						<p class="block font-sans antialiased leading-none text-green-900 opacity-70 font-semibold">
							Actions
						</p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="p-3 border-b border-gray-300">
						<div class="flex items-center gap-3">
							<img class="relative inline-block h-40 w-40 rounded object-cover object-center" src=<%=orchid.image %>
							alt=<%=orchid.name%> />
								<div class="flex flex-col gap-6">
									<p class="block font-sans antialiased font-semibold text-3xl leading-normal text-green-900">
										<%= orchid.name %>
									</p>
									<p
										class="block font-sans antialiased font-semibold leading-normal text-green-900 opacity-70 text-2xl">
										<%= orchid.id %>
									</p>
								</div>
						</div>
					</td>
					<td class="p-4 border-b border-gray-300">
						<div class="flex flex-col">
							<p class="block font-sans antialiased font-semibold leading-normal text-green-900 text-2xl">
								<%= orchid.price %>
							</p>
						</div>
					</td>
					<td class="p-4 border-b border-gray-300">
						<div class="flex flex-col">
							<p class="block font-sans antialiased font-semibold leading-normal text-green-900 text-2xl">
								<%= orchid.original %>
							</p>
						</div>
					</td>
					<td class="p-4 border-b border-gray-300">
						<div class="w-max">
							<div
								class="relative grid items-center px-2 py-1 font-sans font-bold text-green-900 text-base uppercase rounded-md select-none whitespace-nowrap bg-green-500/30">
								<span class="">
									<%= orchid.isNatural ? "Is Natural" : "Not natural" %>
								</span>
							</div>
						</div>
					</td>
					<td class="p-4 border-b border-gray-300">
						<p class="block font-sans antialiased font-semibold leading-normal text-green-900 text-2xl">
							<%= orchid.color %>
						</p>
					</td>
					<td class="p-4 border-b border-gray-300">
						<button onclick="deleteOrchid('<%= orchid.id %>')"
							class="btn-danger relative h-10 max-h-[40px] w-10 select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-green-900 transition-all hover:bg-gray-900/10 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
							type="button">
							<span class="absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2">
								<span class="material-symbols-outlined">
									delete
								</span>
							</span>
						</button>
						<button
							onclick="(() => setEditOrchid({id : '<%= orchid.id %>', name: '<%= orchid.name %>',image: '<%= orchid.image %>' , price: '<%= orchid.price %>', isNatural: '<%= orchid.isNatural %>', original: '<%= orchid.original %>', color: '<%= orchid.color %>'}))()"
							data-ripple-light="true" data-dialog-target="dialog-edit"
							class="btn-action relative h-10 max-h-[40px] w-10 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-green-900 transition-all hover:bg-gray-900/10 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
							type="button">
							<span class="absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2">
								<span class="material-symbols-outlined">
									edit
								</span>
							</span>
						</button>
					</td>
				</tr>
			</tbody>
		</table>

		<!--Card-->
		<!-- <div class="relative flex bg-clip-border rounded-xl bg-white text-gray-700 shadow-md w-full max-w-[48rem] flex-row">
			<div
				class="relative w-1/5 m-0 overflow-hidden text-gray-700 bg-white rounded-r-none bg-clip-border rounded-xl shrink-0">
				<img
					src=<%=orchid.image %>
					alt="card-image" class="object-cover w-full h-full" />
			</div>
			<div class="p-6">
				<h4 class="block mb-2 font-sans text-green-900 antialiased font-semibold leading-snug tracking-normal text-blue-gray-900 text-4xl">
					<%= orchid.name %>
				</h4>
				<p class="block mb-8 font-sans antialiased font-normal leading-relaxed text-green-900 text-2xl">
					Original: <%= orchid.original %>
				</p>
				<p class="block mb-8 font-sans antialiased font-normal leading-relaxed text-green-900 text-2xl">
					Nature: <%= orchid.isNatural %>
				</p>
				<p class="block mb-8 font-sans antialiased font-normal leading-relaxed text-green-900 text-2xl">
					Color: <%= orchid.color %>
				</p>
				<a href="#" class="inline-block"><button
						class="flex items-center gap-2 px-6 py-3 font-sans text-xs font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none hover:bg-gray-900/10 active:bg-gray-900/20"
						type="button">
						Learn More<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
							stroke-width="2" class="w-4 h-4">
							<path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
						</svg></button></a>
			</div>
		</div>   -->

		<!-- Edit form-->
		<div data-dialog-backdrop="dialog-edit" data-dialog-backdrop-close="true"
			class="pointer-events-none fixed inset-0 z-50 grid h-screen w-screen place-items-center bg-black bg-opacity-60 opacity-0 backdrop-blur-sm transition-opacity duration-300">
			<div data-dialog="dialog-edit"
				class="relative m-4 w-1/3 min-w-[40%] max-w-[40%] rounded-lg bg-white font-sans text-base font-light leading-relaxed text-blue-gray-500 antialiased shadow-2xl">
				<div class="relative flex flex-col text-gray-700 bg-transparent shadow-none rounded-xl bg-clip-border p-8">
					<h4 class="block font-sans text-2xl antialiased font-semibold leading-snug tracking-normal">
						Edit A New Orchid
					</h4>
					<form class="mt-4 ">
						<input type="hidden" id="id-edit" name="id-edit">
						<div class="flex flex-col gap-4 mb-1">
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Name
							</h6>
							<div class="relative h-11 w-full min-w-[200px]">
								<input placeholder="orchid name" type="text" id="name-edit" name="name-edit" value='editOrchid'
									class="peer h-full w-full rounded-md border-2 border-green-200 bg-transparent px-3 py-3 font-sans font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-green-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 disabled:border-0 disabled:bg-blue-gray-50" />
								<label
									class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-500 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-green-200 before:transition-all before:content-none after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-green-200 after:transition-all after:content-none peer-placeholder-shown peer-placeholder-shown:leading-[4.1] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:!border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:!border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500"></label>
							</div>
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Image
							</h6>
							<div class="relative h-11 w-full min-w-[200px]">
								<input placeholder="url" type="text" id="image-edit" name="image-edit" required
									class="peer h-full w-full rounded-md border-2 border-green-200 bg-transparent px-3 py-3 font-sans font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-green-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 disabled:border-0 disabled:bg-blue-gray-50" />
								<label
									class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-500 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-green-200 before:transition-all before:content-none after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-green-200 after:transition-all after:content-none peer-placeholder-shown peer-placeholder-shown:leading-[4.1] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:!border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:!border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500"></label>
							</div>
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Price
							</h6>
							<div class="relative h-11 w-full min-w-[200px]">
								<input placeholder="********" type="number" id="price-edit" name="price-edit" required
									class="peer h-full w-full rounded-md border-2 border-green-200 bg-transparent px-3 py-3 font-sans font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-green-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 disabled:border-0 disabled:bg-blue-gray-50" />
								<label
									class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-500 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-green-200 before:transition-all before:content-none after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-green-200 after:transition-all after:content-none peer-placeholder-shown peer-placeholder-shown:leading-[4.1] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:!border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:!border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500"></label>
							</div>
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Natural
							</h6>
							<div class="inline-flex items-center gap-2">
								<input type="checkbox" id="isNatural-edit" name="isNatural-edit"
									class="relative h-5 w-5 cursor-pointer rounded-md border accent-green-700" />
								<label class="mt-px font-light text-green-700 cursor-pointer select-none" for="isNatural-edit">
									Is Natural
								</label>
							</div>
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Original
							</h6>
							<div class="relative h-11 w-full min-w-[200px]">
								<input type="text" id="original-edit" name="original-edit" placeholder="orchid original"
									class="peer h-full w-full rounded-md border-2 border-green-200 bg-transparent px-3 py-3 font-sans font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-green-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 disabled:border-0 disabled:bg-blue-gray-50" />
								<label
									class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-500 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-green-200 before:transition-all before:content-none after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-green-200 after:transition-all after:content-none peer-placeholder-shown peer-placeholder-shown:leading-[4.1] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:!border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:!border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500"></label>
							</div>
							<h6
								class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-green-900">
								Color
							</h6>
							<div class="relative h-11 w-full min-w-[200px]">
								<input type="text" id="color-edit" name="color-edit" placeholder="orchid color"
									class="peer h-full w-full rounded-md border-2 border-green-200 bg-transparent px-3 py-3 font-sans font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-green-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 disabled:border-0 disabled:bg-blue-gray-50" />
								<label
									class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-500 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-green-200 before:transition-all before:content-none after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-green-200 after:transition-all after:content-none peer-placeholder-shown peer-placeholder-shown:leading-[4.1] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:!border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:!border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500"></label>
							</div>
						</div>
					</form>
				</div>
				<div class="flex flex-wrap items-center justify-end p-4 shrink-0 text-blue-gray-500">

					<button data-ripple-dark="true" data-dialog-close="true"
						class="px-6 py-3 mr-1 font-sans font-bold text-red-500 uppercase transition-all rounded-lg middle none center hover:bg-red-500/10 active:bg-red-500/30 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
						Cancel
					</button>
					<button data-ripple-light="true" onclick="editOrchid()"
						class="middle none center rounded-lg bg-gradient-to-tr from-green-600 to-green-400 py-3 px-6 font-sans font-bold uppercase text-white shadow-md shadow-green-500/20 transition-all hover:shadow-lg hover:shadow-green-500/40 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
						Update
					</button>
				</div>
			</div>
		</div>
	</section>
	<footer>
		<p>&copy; 2024 Your Flower Shop. All rights reserved.</p>
	</footer>
	<script>
		function setEditOrchid(editOrchid) {
			const { id, name, image, price, original, isNatural, color } = editOrchid
			console.log(editOrchid)
			document.getElementById('id-edit').value = id;
			document.getElementById('name-edit').value = name;
			document.getElementById('image-edit').value = image;
			document.getElementById('price-edit').value = price;
			document.getElementById('original-edit').value = original;
			document.getElementById('isNatural-edit').checked = JSON.parse(isNatural.toLowerCase());
			document.getElementById('color-edit').value = color;

		}

		function editOrchid() {
			const userConfirmed = window.confirm('Are you sure you want to edit this orchid?');
			if (!userConfirmed) return;
			// Access form elements using the DOM
			const id = document.getElementById('id-edit').value;
			const name = document.getElementById('name-edit').value;
			const image = document.getElementById('image-edit').value;
			const price = document.getElementById('price-edit').value;
			const original = document.getElementById('original-edit').value;
			const isNatural = document.getElementById('isNatural-edit').checked;
			const color = document.getElementById('color-edit').value;

			// Create an object with the form data
			const formData = {
				name: name,
				image: image,
				price: price,
				original: original,
				isNatural: isNatural,
				color: color,
			};

			// Create a new XMLHttpRequest object
			const xhr = new XMLHttpRequest();

			// Configure it: POST-request for the URL "http://localhost:4000/orchids"
			xhr.open('PUT', `http://localhost:4000/orchids/${id}`, true);

			// Set the request header to indicate the content type is JSON
			xhr.setRequestHeader('Content-Type', 'application/json');

			// Set up a callback function to handle the response
			xhr.onload = function () {
				if (xhr.status >= 200 && xhr.status < 300) {
					// If the request was successful, log the response
					console.log('Response:', xhr.responseText);
					window.location.href = `http://localhost:4000/orchids/${id}`;
				} else {
					// Handle the error
					alert(`Error: ${xhr.responseText}`)
					console.error('Error:', xhr.statusText);
				}
			};

			// Convert the formData object to JSON and send it in the request body
			const jsonData = JSON.stringify(formData);
			xhr.send(jsonData);
		}


		function deleteOrchid(id) {
			const userConfirmed = window.confirm('Are you sure you want to delete this orchid?');
			if (!userConfirmed) return;

			const xhr = new XMLHttpRequest();

			xhr.open('DELETE', `http://localhost:4000/orchids/${id}`, true);

			xhr.onload = function () {
				if (xhr.status >= 200 && xhr.status < 300) {
					console.log('Response:', xhr.responseText);
					window.location.href = "http://localhost:4000/orchids";
				} else {
					// If there was an error, call the error callback
					console.error('Error:', xhr.statusText);
				}
			};

			// Send the DELETE request
			xhr.send();
		}
	</script>

	<script src="https://unpkg.com/@material-tailwind/html@latest/scripts/script-name.js"></script>
	<script src="https://unpkg.com/@material-tailwind/html@latest/scripts/dialog.js"></script>
	<script src="https://unpkg.com/@material-tailwind/html@latest/scripts/ripple.js"></script>

</body>

</html>